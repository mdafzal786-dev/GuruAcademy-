/* Chatbot.css — Ultra Interactive & Polished 2026 Style */

:root {
  --primary:        #6366f1;
  --primary-dark:   #4f46e5;
  --primary-light:  #a5b4fc;
  --accent:         #d946ef;
  --gradient:       linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
  --text-dark:      #0f172a;
  --text-muted:     #475569;
  --bg-glass:       rgba(255, 255, 255, 0.86);
  --shadow-sm:      0 8px 28px rgba(99, 102, 241, 0.20);
  --shadow-md:      0 20px 64px rgba(99, 102, 241, 0.36);
  --shadow-lg:      0 30px 100px rgba(0, 0, 0, 0.16);
  --transition:     all 0.36s cubic-bezier(0.34, 1.56, 0.64, 1.38);
}

.chatbot-wrapper {
  position: fixed;
  bottom: 32px;
  right: 32px;
  z-index: 1000;
}

/* ─── Floating Action Button ──────────────────────────────────────── */
.chatbot-fab {
  width: 72px;
  height: 72px;
  border: none;
  border-radius: 50%;
  background: var(--gradient);
  color: white;
  font-size: 2.3rem;
  box-shadow: var(--shadow-md), inset 0 -6px 16px rgba(139,92,246,0.32);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
  position: relative;
  overflow: hidden;
}

.chatbot-fab:hover {
  transform: scale(1.16) translateY(-8px);
  box-shadow: 0 32px 96px rgba(99,102,241,0.52),
              inset 0 -8px 20px rgba(139,92,246,0.48);
}

.chatbot-fab:active {
  transform: scale(0.9);
}

.chatbot-fab:focus-visible {
  outline: 4px solid var(--primary-light);
  outline-offset: 6px;
}

/* Breathing pulse when closed */
@keyframes fabPulse {
  0%, 100% { box-shadow: var(--shadow-md); }
  50%      { box-shadow: 0 28px 88px rgba(139,92,246,0.68); }
}

.chatbot-wrapper:not(.open) .chatbot-fab {
  animation: fabPulse 4.8s infinite ease-in-out;
}

/* ─── Main Container ──────────────────────────────────────────────── */
.chatbot-container {
  width: 420px;
  height: 640px;
  max-height: 86vh;
  background: var(--bg-glass);
  backdrop-filter: blur(26px) saturate(180%);
  -webkit-backdrop-filter: blur(26px) saturate(180%);
  border-radius: 30px;
  border: 1px solid rgba(255,255,255,0.34);
  box-shadow: var(--shadow-lg), inset 0 2px 4px rgba(255,255,255,0.65);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  opacity: 0;
  transform: scale(0.86) translateY(80px);
  transition: all 0.54s cubic-bezier(0.34, 1.56, 0.64, 1.48);
}

.chatbot-wrapper.open .chatbot-container {
  opacity: 1;
  transform: scale(1) translateY(0);
}

/* ─── Header ──────────────────────────────────────────────────────── */
.chatbot-header {
  padding: 18px 24px;
  background: var(--gradient);
  color: white;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 6px 28px rgba(79,70,229,0.48);
  position: relative;
}

.chatbot-header::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom, rgba(255,255,255,0.26), transparent);
  pointer-events: none;
}

.bot-avatar-img {
  width: 52px;
  height: 52px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid rgba(255,255,255,0.75);
  box-shadow: 0 4px 16px rgba(0,0,0,0.24);
  transition: var(--transition);
}

.bot-avatar-img:hover {
  transform: scale(1.12);
  box-shadow: 0 8px 24px rgba(0,0,0,0.32);
}

/* ─── Close Button ────────────────────────────────────────────────── */
.close-btn {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: rgba(255,255,255,0.3);
  color: white;
  font-size: 2.1rem;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
  backdrop-filter: blur(12px);
}

.close-btn:hover {
  background: rgba(255,255,255,0.5);
  transform: rotate(180deg) scale(1.22);
  box-shadow: 0 12px 36px rgba(0,0,0,0.38);
}

.close-btn:active {
  transform: scale(0.84);
}

/* ─── Messages Area ───────────────────────────────────────────────── */
.chatbot-messages {
  flex: 1;
  padding: 28px 24px;
  overflow-y: auto;
  background: linear-gradient(to bottom, #f8fafc, #f1f5f9);
  display: flex;
  flex-direction: column;
  gap: 22px;
  scrollbar-width: thin;
  scrollbar-color: #c7d2fe #e2e8f0;
}

.chatbot-messages::-webkit-scrollbar-thumb {
  background: #a5b4fc;
  border-radius: 12px;
}

/* Message row + stagger entrance */
.message-row {
  display: flex;
  align-items: flex-end;
  opacity: 0;
  transform: translateY(36px);
  animation: msgEnter 0.56s cubic-bezier(0.34, 1.56, 0.64, 1.38) forwards;
  animation-delay: var(--delay, 0s);
}

.message-row.user {
  flex-direction: row-reverse;
  align-items: flex-end;
}

@keyframes msgEnter {
  to { opacity: 1; transform: translateY(0); }
}

/* Avatar next to bot messages */
.chat-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
  margin-right: 10px;
  margin-bottom: 4px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.18);
  transition: var(--transition);
}

.message-row.bot:hover .chat-avatar {
  transform: scale(1.15);
}

/* Message bubble */
.message-bubble {
  max-width: 80%;
  padding: 14px 20px;
  border-radius: 24px;
  font-size: 1.05rem;
  line-height: 1.5;
  transition: var(--transition);
  position: relative;
}

.message-bubble:hover {
  transform: translateY(-5px) scale(1.018);
  box-shadow: 0 14px 48px rgba(0,0,0,0.18);
}

.message-bubble.user {
  background: var(--gradient);
  color: white;
  border-bottom-right-radius: 10px;
  box-shadow: 0 6px 28px rgba(99,102,241,0.42);
}

.message-bubble.user:hover {
  box-shadow: 0 16px 56px rgba(99,102,241,0.62);
}

.message-bubble.bot {
  background: rgba(255,255,255,0.98);
  color: var(--text-dark);
  border-bottom-left-radius: 10px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.12);
  backdrop-filter: blur(4px);
}

/* Typing indicator — very alive */
.typing {
  padding: 16px 24px;
  width: 96px;
  display: flex;
  gap: 10px;
  background: linear-gradient(90deg, #e2e8f0, #f1f5f9) !important;
  border-radius: 999px;
  animation: typingBreath 2.6s infinite ease-in-out;
}

@keyframes typingBreath {
  0%,100% { transform: scale(1); opacity: 0.88; }
  50%     { transform: scale(1.07); opacity: 1; }
}

.dot {
  width: 12px;
  height: 12px;
  background: var(--primary-light);
  border-radius: 50%;
  animation: dotJump 1.6s infinite cubic-bezier(0.645,0.045,0.355,1),
             dotColor 3.2s infinite ease-in-out;
  box-shadow: 0 4px 12px rgba(99,102,241,0.4);
}

.dot:nth-child(2) { animation-delay: 0.22s; }
.dot:nth-child(3) { animation-delay: 0.44s; }

@keyframes dotJump {
  0%,80%,100% { transform: translateY(0); }
  40%         { transform: translateY(-9px); }
}

@keyframes dotColor {
  0%,100% { filter: brightness(1); }
  50%     { filter: brightness(1.6) hue-rotate(30deg); }
}

/* ─── Input Area + Send Button ────────────────────────────────────── */
.chatbot-input-area {
  padding: 20px 24px;
  background: rgba(255,255,255,0.92);
  border-top: 1px solid rgba(226,232,240,0.88);
  backdrop-filter: blur(16px);
  display: flex;
  gap: 16px;
}

.chatbot-input-area input {
  flex: 1;
  padding: 16px 24px;
  border: 1px solid rgba(209,213,219,0.8);
  border-radius: 999px;
  font-size: 1.04rem;
  background: rgba(248,250,252,0.85);
  backdrop-filter: blur(12px);
  transition: var(--transition);
}

.chatbot-input-area input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 5px rgba(99,102,241,0.28);
  background: white;
  outline: none;
}

/* Send button with flying paper plane */
.chatbot-input-area button {
  width: 58px;
  height: 58px;
  border-radius: 50%;
  background: var(--gradient);
  color: white;
  border: none;
  font-size: 0;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
  box-shadow: var(--shadow-sm);
  position: relative;
  overflow: hidden;
}

.chatbot-input-area button:hover:not(:disabled) {
  transform: scale(1.2);
  box-shadow: 0 18px 60px rgba(99,102,241,0.58);
}

.chatbot-input-area button:active {
  transform: scale(0.86);
}

.chatbot-input-area button:disabled {
  opacity: 0.58;
  cursor: not-allowed;
  transform: none;
}

/* Paper plane */
.chatbot-input-area button::before {
  content: "✈";
  font-size: 1.9rem;
  transition: transform 0.64s cubic-bezier(0.25, 0.8, 0.25, 1);
  transform-origin: 60% 50%;
}

.chatbot-input-area button.sending::before {
  animation: planeLaunch 0.68s forwards;
}

@keyframes planeLaunch {
  0%   { transform: translateX(0) translateY(0) rotate(0deg); }
  40%  { transform: translateX(12px) translateY(-8px) rotate(-18deg); }
  70%  { transform: translateX(26px) translateY(-18px) rotate(-42deg); }
  100% { transform: translateX(38px) translateY(-28px) rotate(-70deg); opacity: 0.25; }
}

/* Mobile adjustments */
@media (max-width: 540px) {
  .chatbot-wrapper   { bottom: 24px; right: 24px; }
  .chatbot-container { width: calc(100vw - 48px); }
  .chatbot-fab       { width: 66px; height: 66px; font-size: 2.1rem; }
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    transition-duration: 0.01ms !important;
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }
}